<img width="3212" height="1712" alt="регистрация шаг 1" src="https://github.com/user-attachments/assets/a77165f3-48cd-44eb-94ae-286c77c1f84d" /># **Программное средство автоматизации обмена заказами между торговыми сетями и поставщиками**

---

### Краткое описание проекта

**Order Exchange** – это платформа для автоматизации обмена заказами между торговыми сетями и поставщиками. 
Её задача — превратить процесс, который ранее сопровождался ошибками, дублированием данных и устаревшими справочниками, 
в прозрачный и надёжный механизм, где каждое действие контролируется и синхронизируется в реальном времени.

Система создавалась с опорой на современные архитектурные принципы: микросервисы обеспечивают модульность и масштабируемость, 
**Clean Architecture** отделяет бизнес-логику от технической реализации, 
а **Domain-Driven Design** позволяет строить решение вокруг реальных бизнес-понятий. 
Использование **CQRS** и событийного подхода делает взаимодействие гибким и предсказуемым, а средства наблюдаемости гарантируют, 
что процессы остаются управляемыми и прозрачными.

В результате **Order Exchange** – это не просто набор сервисов, а целостная экосистема, 
где объединяются безопасность, автоматизация и аналитика, чтобы бизнес-процесс заказов стал устойчивым, точным и эффективным.

### Цели проекта

- Повысить качество и скорость обработки заказов;
- Минимизировать влияние человеческого фактора и снизить количество ошибок;
- Обеспечить прозрачное взаимодействие между всеми участниками процесса;
- Создать централизованный и актуальный источник данных о заказах, товарах и контрагентах;
- Внедрить удобный интерфейс и единые стандарты работы с заказами и документами.

### Основные возможности

- Централизованная база контрагентов с валидацией и актуализацией данных;
- Единый каталог товаров с проверкой артикулов и синхронизацией цен;
- Автоматическая генерация документов и хранение в системе;
- Стандартизированные формы заказов с корректной обработкой адресов и условий доставки;
- Встроенный чат для оперативного взаимодействия между поставщиками и торговыми сетями;
- Аналитический модуль для мониторинга показателей и формирования отчётов.

---

## **Содержание**

1. [Архитектура](#Архитектура)
	1. [C4-модель](#C4-модель)
	2. [Схема данных](#Схема_данных)
2. [Функциональные возможности](#Функциональные_возможности)
	1. [Диаграмма вариантов использования](#Диаграмма_вариантов_использования)
	2. [User-flow диаграммы](#User-flow_диаграммы)
4. [Пользовательский интерфейс](#Пользовательский_интерфейс)
	1. [Примеры экранов UI](#Примеры_экранов_UI)
6. [Детали реализации](#Детали_реализации)
	1. [UML-диаграммы](#UML-диаграммы)
	2. [Спецификация API](#Спецификация_API)
	3. [Безопасность](#Безопасность)
	4. [Оценка качества кода](#Оценка_качества_кода)
7. [Тестирование](#Тестирование)
	1. [Unit-тесты](#Unit-тесты)
	2. [Интеграционные тесты](#Интеграционные_тесты)
8. [Установка и  запуск](#installation)
	1. [Манифесты для сборки docker образов](#Манифесты_для_сборки_docker_образов)
	2. [Манифесты для развертывания k8s кластера](#Манифесты_для_развертывания_k8s_кластера)
9. [Лицензия](#Лицензия)
10. [Контакты](#Контакты)

---
## **Архитектура**

### C4-модель

Система спроектирована как набор микросервисов с разделением по бизнес-доменам. 
Взаимодействие внешнего интерфейса и сервисов происходит синхронно через **API Gateway** (**REST/HTTP, JSON, JWT**) 
и асинхронно – через **Message Broker** (событийная шина для **CQRS/ES** и обмена событиями). 
Система использует принципы **Clean Architecture, DDD и CQRS**, применяет **JSON** как основной формат обмена, аутентификацию на основе **JWT**, 
и покрыта средствами наблюдаемости (**OpenTelemetry**). 

#### Контейнерный уровень

<img width="10524" height="7524" alt="image" src="https://github.com/user-attachments/assets/22d395e0-1634-4a36-90ac-6932de413619" />

Архитектура **Order Exchange** построена по микросервисному принципу и разделена на несколько контейнеров, каждый из которых отвечает за свой бизнес-домен. 
Пользователи – администратор, торговая сеть и поставщик — работают через веб-приложение (**Angular + TypeScript**), 
которое взаимодействует с серверной частью по защищённому протоколу **HTTPS** с использованием **JWT**.

Центральным узлом является **API Gateway**, обеспечивающий маршрутизацию и проверку прав доступа. 
За ключевые процессы отвечают отдельные сервисы:
- `Auth Service` управляет аутентификацией и авторизацией;
- `Order Service` обрабатывает заказы и управляет их жизненным циклом;
- `Catalog Service` отвечает за товары и каталоги;
- `Document Service` формирует и хранит документы;
- `Chat Service` обеспечивает обмен сообщениями в реальном времени;
- `Analytics Service` агрегирует данные и формирует отчёты.

Для асинхронного обмена событиями используется **RabbitMQ**, что снижает связанность между сервисами и повышает надёжность. 
Данные каждого сервиса хранятся в отдельной базе, а наблюдаемость обеспечивается через **OpenTelemetry**.

#### Компонентный уровень

<img width="16384" height="8744" alt="image" src="https://github.com/user-attachments/assets/c0c53526-d7ba-4a59-8ada-3ca17cc39713" />

На компонентном уровне каждая подсистема **Order Exchange** разделена на контроллеры, сервисы, доменные модели и интеграционные компоненты.  
Такой подход отражает принципы **DDD** и **Clean Architecture**, где бизнес-логика изолирована от инфраструктуры, а все взаимодействия между модулями происходят через чётко определённые интерфейсы.  

- **Контроллеры** – принимают внешние запросы и передают их в слой приложений  
  `AuthController`, `OrderController`, `CatalogController`, `DocumentController`, `ChatController`  

- **Сервисы** – реализуют основную бизнес-логику: обработку заказов, управление каталогами, генерацию документов, аналитику и чат  
  *Примеры:* `AuthService`, `OrderCommandHandler`, `CatalogCommandHandler`, `DocumentService`, `ChatService`, `AnalyticsService`  

- **Доменные модели (Aggregates)** – инкапсулируют правила предметной области и обеспечивают целостность данных  
  `OrderAggregate`, `ProductAggregate`, `InventoryAggregate`  

- **Репозитории** – обеспечивают доступ к данным и скрывают детали работы с базами  
  `UserRepository`, `OrderRepository`, `CatalogRepository`, `AnalyticsRepository`  

- **Интеграционные компоненты** – связывают сервисы через брокер сообщений и внешние системы  
  `EventPublisher`, `EventsListener`, `ObjectStorageClient`, `SupplierIntegration`  

- **Инфраструктурные элементы** – поддерживают вспомогательные процессы, не затрагивая бизнес-логику  
  `PDFGenerator`, `TemplateEngine`, `TracingAdapter`, `SecurityConfig`  


### Схема данных

Описание отношений и структур данных, используемых в ПС. Также представить скрипт (программный код), который необходим для генерации БД

---

## **Функциональные возможности**

### Диаграмма вариантов использования

Диаграмма вариантов использования и ее описание

### User-flow диаграммы

#### **User-flow для роли "Торговая сеть"**
<img width="5284" height="8484" alt="image" src="https://github.com/user-attachments/assets/1f60d282-ca9c-4c56-8b27-2f88de73cb41" />

#### **User-flow для роли "Поставщик"**
<img width="6884" height="8084" alt="image" src="https://github.com/user-attachments/assets/671d2d40-50a0-4087-b76c-35e210425ebf" />

#### **User-flow для роли "Администратор"**
<img width="6888" height="5684" alt="image" src="https://github.com/user-attachments/assets/ca283753-ba89-4396-91f0-bc794db96ad9" />

---

## **Пользовательский интерфейс**

### Примеры экранов UI

#### **Общие страницы**

- главная страница
<img width="3868" height="4016" alt="главная" src="https://github.com/user-attachments/assets/e00fbbf8-4e35-463b-8581-bd3f5cae128a" />

- авторизация
<img width="3212" height="2000" alt="авторизация" src="https://github.com/user-attachments/assets/85136ae9-4119-4ba0-95c2-ed9d95a31407" />

#### **Примеры экранов UI для роли "Поставщик"**

- регистрация шаг 1
<img width="3212" height="1712" alt="регистрация шаг 1" src="https://github.com/user-attachments/assets/6d3f6f46-2be8-48a9-85e7-885f8193e20a" />

- регистрация шаг 2
<img width="3212" height="2528" alt="регистрация шаг 2" src="https://github.com/user-attachments/assets/f4256b54-3146-4924-8d03-c8ef26febcf0" />

- регистрация шаг 3
<img width="3212" height="2528" alt="регистрация шаг 3" src="https://github.com/user-attachments/assets/86e29f14-ab9f-4dcc-a53d-304b68f112a3" />

- регистрация шаг 4
<img width="3212" height="2528" alt="регистрация шаг 4" src="https://github.com/user-attachments/assets/0b258129-23bf-4d84-ac89-261adef86542" />

- регистрация шаг 5
<img width="3212" height="2528" alt="регистрация шаг 5" src="https://github.com/user-attachments/assets/f45e9b1f-cea9-422d-99e7-e4942245df21" />

- отказ в регистрации
  <img width="3212" height="2000" alt="отказ в регистрации" src="https://github.com/user-attachments/assets/df9c25f5-99e4-45c1-b4c5-db0eb436f3a9" />

- главная панель
<img width="3212" height="2000" alt="главная панель" src="https://github.com/user-attachments/assets/99f2cfea-701f-44a7-af30-5abe73ae2dbf" />

- создание кааталога
<img width="3212" height="2000" alt="создание кааталога" src="https://github.com/user-attachments/assets/9b342ee1-3dcd-439a-8f8e-bad4c4f83521" />

- добавление товара шаг 1
<img width="3212" height="2000" alt="добавление товара шаг 1" src="https://github.com/user-attachments/assets/6ad0f887-7b89-4ff0-b20b-f2fa24b7e71e" />

- добавление товара шаг 2
<img width="3212" height="2000" alt="добавление товара шаг 2" src="https://github.com/user-attachments/assets/452fcf55-68ef-41f1-9452-e8dfe6ea2439" />

- добавление товара шаг 3
<img width="3212" height="2000" alt="добавление товара шаг 3" src="https://github.com/user-attachments/assets/97d5041a-ff4e-47b5-b75e-ca15374d1daa" />

#### **Примеры экранов UI для роли "Торговая сеть"**

#### **Примеры экранов UI для роли "Администратор"**

---

## **Детали реализации**

### UML-диаграммы

Представить все UML-диаграммы , которые позволят более точно понять структуру и детали реализации ПС

### Спецификация API

Представить описание реализованных функциональных возможностей ПС с использованием Open API (можно представить либо полный файл спецификации, либо ссылку на него)

### Безопасность

Описать подходы, использованные для обеспечения безопасности, включая описание процессов аутентификации и авторизации с примерами кода из репозитория сервера

### Оценка качества кода

Используя показатели качества и метрики кода, оценить его качество

---

## **Тестирование**

### Unit-тесты

Представить код тестов для пяти методов и его пояснение

### Интеграционные тесты

Представить код тестов и его пояснение

---

## **Установка и  запуск**

### Манифесты для сборки docker образов

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

### Манифесты для развертывания k8s кластера

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

---

## **Лицензия**

Этот проект лицензирован по лицензии MIT - подробности представлены в файле [LICENSE.md]

---

## **Контакты**

Автор: nkovzovic231104@gmail.com
