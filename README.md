# **Программное средство автоматизации обмена заказами между торговыми сетями и поставщиками**

---

### Краткое описание проекта

**Order Exchange** – это платформа для автоматизации обмена заказами между торговыми сетями и поставщиками. 
Её задача — превратить процесс, который ранее сопровождался ошибками, дублированием данных и устаревшими справочниками, 
в прозрачный и надёжный механизм, где каждое действие контролируется и синхронизируется в реальном времени.

Система создавалась с опорой на современные архитектурные принципы: микросервисы обеспечивают модульность и масштабируемость, 
**Clean Architecture** отделяет бизнес-логику от технической реализации, 
а **Domain-Driven Design** позволяет строить решение вокруг реальных бизнес-понятий. 
Использование **CQRS** и событийного подхода делает взаимодействие гибким и предсказуемым, а средства наблюдаемости гарантируют, 
что процессы остаются управляемыми и прозрачными.

В результате **Order Exchange** – это не просто набор сервисов, а целостная экосистема, 
где объединяются безопасность, автоматизация и аналитика, чтобы бизнес-процесс заказов стал устойчивым, точным и эффективным.

### Цели проекта

- Повысить качество и скорость обработки заказов;
- Минимизировать влияние человеческого фактора и снизить количество ошибок;
- Обеспечить прозрачное взаимодействие между всеми участниками процесса;
- Создать централизованный и актуальный источник данных о заказах, товарах и контрагентах;
- Внедрить удобный интерфейс и единые стандарты работы с заказами и документами.

### Основные возможности

- Централизованная база контрагентов с валидацией и актуализацией данных;
- Единый каталог товаров с проверкой артикулов и синхронизацией цен;
- Автоматическая генерация документов и хранение в системе;
- Стандартизированные формы заказов с корректной обработкой адресов и условий доставки;
- Встроенный чат для оперативного взаимодействия между поставщиками и торговыми сетями;
- Аналитический модуль для мониторинга показателей и формирования отчётов.

---

## **Содержание**

1. [Архитектура](#Архитектура)
	1. [C4-модель](#C4-модель)
	2. [Схема данных](#Схема_данных)
2. [Функциональные возможности](#Функциональные_возможности)
	1. [Диаграмма вариантов использования](#Диаграмма_вариантов_использования)
	2. [User-flow диаграммы](#User-flow_диаграммы)
3. [Детали реализации](#Детали_реализации)
	1. [UML-диаграммы](#UML-диаграммы)
	2. [Спецификация API](#Спецификация_API)
	3. [Безопасность](#Безопасность)
	4. [Оценка качества кода](#Оценка_качества_кода)
4. [Тестирование](#Тестирование)
	1. [Unit-тесты](#Unit-тесты)
	2. [Интеграционные тесты](#Интеграционные_тесты)
5. [Установка и  запуск](#installation)
	1. [Манифесты для сборки docker образов](#Манифесты_для_сборки_docker_образов)
	2. [Манифесты для развертывания k8s кластера](#Манифесты_для_развертывания_k8s_кластера)
6. [Лицензия](#Лицензия)
7. [Контакты](#Контакты)

---
## **Архитектура**

### C4-модель

Система спроектирована как набор микросервисов с разделением по бизнес-доменам. 
Взаимодействие внешнего интерфейса и сервисов происходит синхронно через **API Gateway** (**REST/HTTP, JSON, JWT**) 
и асинхронно – через **Message Broker** (событийная шина для **CQRS/ES** и обмена событиями). 
Система использует принципы **Clean Architecture, DDD и CQRS**, применяет **JSON** как основной формат обмена, аутентификацию на основе **JWT**, 
и покрыта средствами наблюдаемости (**OpenTelemetry**). 

#### Контейнерный уровень

![Иллюстрация к проекту](https://github.com/NikitaKovzovich/order-exchange/blob/89a36dc83f5184937beb93fc321ce48a5c477205/%D1%814%20%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%BD%D1%8B%D0%B9%20%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C.png)

Архитектура **Order Exchange** построена по микросервисному принципу и разделена на несколько контейнеров, каждый из которых отвечает за свой бизнес-домен. 
Пользователи – администратор, торговая сеть и поставщик — работают через веб-приложение (**Angular + TypeScript**), 
которое взаимодействует с серверной частью по защищённому протоколу **HTTPS** с использованием **JWT**.

Центральным узлом является **API Gateway**, обеспечивающий маршрутизацию и проверку прав доступа. 
За ключевые процессы отвечают отдельные сервисы:
- `Auth Service` управляет аутентификацией и авторизацией;
- `Order Service` обрабатывает заказы и управляет их жизненным циклом;
- `Catalog Service` отвечает за товары и каталоги;
- `Document Service` формирует и хранит документы;
- `Chat Service` обеспечивает обмен сообщениями в реальном времени;
- `Analytics Service` агрегирует данные и формирует отчёты.

Для асинхронного обмена событиями используется **RabbitMQ**, что снижает связанность между сервисами и повышает надёжность. 
Данные каждого сервиса хранятся в отдельной базе, а наблюдаемость обеспечивается через **OpenTelemetry**.

#### Компонентный уровень

![Иллюстрация к проекту](https://github.com/NikitaKovzovich/order-exchange/blob/ce5fb5865478682d3efc8694169f32209141b23e/%D1%814%20%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BD%D1%8B%D0%B9%20%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C.png)

На компонентном уровне каждая подсистема **Order Exchange** разделена на контроллеры, сервисы, доменные модели и интеграционные компоненты.  
Такой подход отражает принципы **DDD** и **Clean Architecture**, где бизнес-логика изолирована от инфраструктуры, а все взаимодействия между модулями происходят через чётко определённые интерфейсы.  

- **Контроллеры** – принимают внешние запросы и передают их в слой приложений  
  `AuthController`, `OrderController`, `CatalogController`, `DocumentController`, `ChatController`  

- **Сервисы** – реализуют основную бизнес-логику: обработку заказов, управление каталогами, генерацию документов, аналитику и чат  
  *Примеры:* `AuthService`, `OrderCommandHandler`, `CatalogCommandHandler`, `DocumentService`, `ChatService`, `AnalyticsService`  

- **Доменные модели (Aggregates)** – инкапсулируют правила предметной области и обеспечивают целостность данных  
  `OrderAggregate`, `ProductAggregate`, `InventoryAggregate`  

- **Репозитории** – обеспечивают доступ к данным и скрывают детали работы с базами  
  `UserRepository`, `OrderRepository`, `CatalogRepository`, `AnalyticsRepository`  

- **Интеграционные компоненты** – связывают сервисы через брокер сообщений и внешние системы  
  `EventPublisher`, `EventsListener`, `ObjectStorageClient`, `SupplierIntegration`  

- **Инфраструктурные элементы** – поддерживают вспомогательные процессы, не затрагивая бизнес-логику  
  `PDFGenerator`, `TemplateEngine`, `TracingAdapter`, `SecurityConfig`  


### Схема данных

Описание отношений и структур данных, используемых в ПС. Также представить скрипт (программный код), который необходим для генерации БД

---

## **Функциональные возможности**

### Диаграмма вариантов использования

Диаграмма вариантов использования и ее описание

### User-flow диаграммы

Описание переходов между части ПС для всех ролей из диаграммы ВИ (название ролей должны совпадать с тем, что указано на c4-модели и диаграмме вариантов использования)


---

## **Детали реализации**

### UML-диаграммы

Представить все UML-диаграммы , которые позволят более точно понять структуру и детали реализации ПС

### Спецификация API

Представить описание реализованных функциональных возможностей ПС с использованием Open API (можно представить либо полный файл спецификации, либо ссылку на него)

### Безопасность

Описать подходы, использованные для обеспечения безопасности, включая описание процессов аутентификации и авторизации с примерами кода из репозитория сервера

### Оценка качества кода

Используя показатели качества и метрики кода, оценить его качество

---

## **Тестирование**

### Unit-тесты

Представить код тестов для пяти методов и его пояснение

### Интеграционные тесты

Представить код тестов и его пояснение

---

## **Установка и  запуск**

### Манифесты для сборки docker образов

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

### Манифесты для развертывания k8s кластера

Представить весь код манифестов или ссылки на файлы с ними (при необходимости снабдить комментариями)

---

## **Лицензия**

Этот проект лицензирован по лицензии MIT - подробности представлены в файле [LICENSE.md]

---

## **Контакты**

Автор: nkovzovic231104@gmail.com
